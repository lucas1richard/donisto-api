"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _models = require("../../../../../models");

var _keys = require("../../../../../models/keys");

const unfollowOrganizationController = async (req, res, next) => {
  try {
    const organization = await _models.Organizations.findOne({
      where: {
        [_keys.OrganizationKeys.UUID]: req.body.org_uuid
      }
    });
    const contact = await _models.Contacts.findOne({
      where: {
        [_keys.ContactKeys.UUID]: req.user.uuid
      }
    });
    await organization.addFollowContact(contact, {
      through: {
        [_keys.ContactOrgFollowsKeys.REJECTED]: true
      }
    });
    res.json(organization);
  } catch (err) {
    next(err);
  }
};

var _default = unfollowOrganizationController;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3NyYy9yb3V0ZXMvdjEvb3JnYW5pemF0aW9uL2NvbnRyb2xsZXJzL3VuZm9sbG93T3JnYW5pemF0aW9uL2luZGV4LnRzIl0sIm5hbWVzIjpbInVuZm9sbG93T3JnYW5pemF0aW9uQ29udHJvbGxlciIsInJlcSIsInJlcyIsIm5leHQiLCJvcmdhbml6YXRpb24iLCJPcmdhbml6YXRpb25zIiwiZmluZE9uZSIsIndoZXJlIiwiT3JnYW5pemF0aW9uS2V5cyIsIlVVSUQiLCJib2R5Iiwib3JnX3V1aWQiLCJjb250YWN0IiwiQ29udGFjdHMiLCJDb250YWN0S2V5cyIsInVzZXIiLCJ1dWlkIiwiYWRkRm9sbG93Q29udGFjdCIsInRocm91Z2giLCJDb250YWN0T3JnRm9sbG93c0tleXMiLCJSRUpFQ1RFRCIsImpzb24iLCJlcnIiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFDQTs7QUFDQTs7QUFFQSxNQUFNQSw4QkFBOEMsR0FBRyxPQUFPQyxHQUFQLEVBQVlDLEdBQVosRUFBaUJDLElBQWpCLEtBQTBCO0FBQy9FLE1BQUk7QUFDRixVQUFNQyxZQUFZLEdBQUcsTUFBTUMsc0JBQWNDLE9BQWQsQ0FBc0I7QUFDL0NDLE1BQUFBLEtBQUssRUFBRTtBQUNMLFNBQUNDLHVCQUFpQkMsSUFBbEIsR0FBeUJSLEdBQUcsQ0FBQ1MsSUFBSixDQUFTQztBQUQ3QjtBQUR3QyxLQUF0QixDQUEzQjtBQU1BLFVBQU1DLE9BQU8sR0FBRyxNQUFNQyxpQkFBU1AsT0FBVCxDQUFpQjtBQUNyQ0MsTUFBQUEsS0FBSyxFQUFFO0FBQ0wsU0FBQ08sa0JBQVlMLElBQWIsR0FBb0JSLEdBQUcsQ0FBQ2MsSUFBSixDQUFTQztBQUR4QjtBQUQ4QixLQUFqQixDQUF0QjtBQU1BLFVBQU1aLFlBQVksQ0FBQ2EsZ0JBQWIsQ0FBOEJMLE9BQTlCLEVBQXVDO0FBQzNDTSxNQUFBQSxPQUFPLEVBQUU7QUFDUCxTQUFDQyw0QkFBc0JDLFFBQXZCLEdBQWtDO0FBRDNCO0FBRGtDLEtBQXZDLENBQU47QUFNQWxCLElBQUFBLEdBQUcsQ0FBQ21CLElBQUosQ0FBU2pCLFlBQVQ7QUFDRCxHQXBCRCxDQW9CRSxPQUFPa0IsR0FBUCxFQUFZO0FBQ1puQixJQUFBQSxJQUFJLENBQUNtQixHQUFELENBQUo7QUFDRDtBQUNGLENBeEJEOztlQTBCZXRCLDhCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUmVxdWVzdEhhbmRsZXIgfSBmcm9tICdleHByZXNzJztcbmltcG9ydCB7IE9yZ2FuaXphdGlvbnMsIENvbnRhY3RzIH0gZnJvbSAnbW9kZWxzJztcbmltcG9ydCB7IE9yZ2FuaXphdGlvbktleXMsIENvbnRhY3RLZXlzLCBDb250YWN0T3JnRm9sbG93c0tleXMgfSBmcm9tICdtb2RlbHMva2V5cyc7XG5cbmNvbnN0IHVuZm9sbG93T3JnYW5pemF0aW9uQ29udHJvbGxlcjogUmVxdWVzdEhhbmRsZXIgPSBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBvcmdhbml6YXRpb24gPSBhd2FpdCBPcmdhbml6YXRpb25zLmZpbmRPbmUoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgW09yZ2FuaXphdGlvbktleXMuVVVJRF06IHJlcS5ib2R5Lm9yZ191dWlkLFxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgY29uc3QgY29udGFjdCA9IGF3YWl0IENvbnRhY3RzLmZpbmRPbmUoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgW0NvbnRhY3RLZXlzLlVVSURdOiByZXEudXNlci51dWlkLFxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgYXdhaXQgb3JnYW5pemF0aW9uLmFkZEZvbGxvd0NvbnRhY3QoY29udGFjdCwge1xuICAgICAgdGhyb3VnaDoge1xuICAgICAgICBbQ29udGFjdE9yZ0ZvbGxvd3NLZXlzLlJFSkVDVEVEXTogdHJ1ZSxcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJlcy5qc29uKG9yZ2FuaXphdGlvbik7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIG5leHQoZXJyKTtcbiAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgdW5mb2xsb3dPcmdhbml6YXRpb25Db250cm9sbGVyO1xuIl19