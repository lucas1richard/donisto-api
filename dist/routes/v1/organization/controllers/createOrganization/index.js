"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _models = require("../../../../../models");

var _keys = require("../../../../../models/keys");

const createOrganizationController = async (req, res, next) => {
  try {
    const organization = await _models.Organizations.create({
      [_keys.OrganizationKeys.NAME]: req.body.name,
      [_keys.OrganizationKeys.CITY]: req.body.city,
      [_keys.OrganizationKeys.STATE]: req.body.state,
      [_keys.OrganizationKeys.ZIP]: req.body.zip,
      [_keys.OrganizationKeys.MISSION]: req.body.mission
    });
    const contact = await _models.Contacts.findOne({
      where: {
        [_keys.ContactKeys.UUID]: req.user
      }
    });
    organization.addContact(contact, {
      through: _models.OrganizationsContacts
    });
    res.json({
      organization
    });
  } catch (err) {
    next(err);
  }
};

var _default = createOrganizationController;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3NyYy9yb3V0ZXMvdjEvb3JnYW5pemF0aW9uL2NvbnRyb2xsZXJzL2NyZWF0ZU9yZ2FuaXphdGlvbi9pbmRleC50cyJdLCJuYW1lcyI6WyJjcmVhdGVPcmdhbml6YXRpb25Db250cm9sbGVyIiwicmVxIiwicmVzIiwibmV4dCIsIm9yZ2FuaXphdGlvbiIsIk9yZ2FuaXphdGlvbnMiLCJjcmVhdGUiLCJPcmdhbml6YXRpb25LZXlzIiwiTkFNRSIsImJvZHkiLCJuYW1lIiwiQ0lUWSIsImNpdHkiLCJTVEFURSIsInN0YXRlIiwiWklQIiwiemlwIiwiTUlTU0lPTiIsIm1pc3Npb24iLCJjb250YWN0IiwiQ29udGFjdHMiLCJmaW5kT25lIiwid2hlcmUiLCJDb250YWN0S2V5cyIsIlVVSUQiLCJ1c2VyIiwiYWRkQ29udGFjdCIsInRocm91Z2giLCJPcmdhbml6YXRpb25zQ29udGFjdHMiLCJqc29uIiwiZXJyIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQ0E7O0FBQ0E7O0FBRUEsTUFBTUEsNEJBQTRDLEdBQUcsT0FBT0MsR0FBUCxFQUFZQyxHQUFaLEVBQWlCQyxJQUFqQixLQUEwQjtBQUM3RSxNQUFJO0FBQ0YsVUFBTUMsWUFBWSxHQUFHLE1BQU1DLHNCQUFjQyxNQUFkLENBQXFCO0FBQzlDLE9BQUNDLHVCQUFpQkMsSUFBbEIsR0FBeUJQLEdBQUcsQ0FBQ1EsSUFBSixDQUFTQyxJQURZO0FBRTlDLE9BQUNILHVCQUFpQkksSUFBbEIsR0FBeUJWLEdBQUcsQ0FBQ1EsSUFBSixDQUFTRyxJQUZZO0FBRzlDLE9BQUNMLHVCQUFpQk0sS0FBbEIsR0FBMEJaLEdBQUcsQ0FBQ1EsSUFBSixDQUFTSyxLQUhXO0FBSTlDLE9BQUNQLHVCQUFpQlEsR0FBbEIsR0FBd0JkLEdBQUcsQ0FBQ1EsSUFBSixDQUFTTyxHQUphO0FBSzlDLE9BQUNULHVCQUFpQlUsT0FBbEIsR0FBNEJoQixHQUFHLENBQUNRLElBQUosQ0FBU1M7QUFMUyxLQUFyQixDQUEzQjtBQVFBLFVBQU1DLE9BQU8sR0FBRyxNQUFNQyxpQkFBU0MsT0FBVCxDQUFpQjtBQUNyQ0MsTUFBQUEsS0FBSyxFQUFFO0FBQ0wsU0FBQ0Msa0JBQVlDLElBQWIsR0FBb0J2QixHQUFHLENBQUN3QjtBQURuQjtBQUQ4QixLQUFqQixDQUF0QjtBQU1BckIsSUFBQUEsWUFBWSxDQUFDc0IsVUFBYixDQUF3QlAsT0FBeEIsRUFBaUM7QUFBRVEsTUFBQUEsT0FBTyxFQUFFQztBQUFYLEtBQWpDO0FBRUExQixJQUFBQSxHQUFHLENBQUMyQixJQUFKLENBQVM7QUFDUHpCLE1BQUFBO0FBRE8sS0FBVDtBQUdELEdBcEJELENBb0JFLE9BQU8wQixHQUFQLEVBQVk7QUFDWjNCLElBQUFBLElBQUksQ0FBQzJCLEdBQUQsQ0FBSjtBQUNEO0FBQ0YsQ0F4QkQ7O2VBMEJlOUIsNEIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSZXF1ZXN0SGFuZGxlciB9IGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IHsgT3JnYW5pemF0aW9ucywgQ29udGFjdHMsIE9yZ2FuaXphdGlvbnNDb250YWN0cyB9IGZyb20gJ21vZGVscyc7XG5pbXBvcnQgeyBPcmdhbml6YXRpb25LZXlzLCBDb250YWN0S2V5cyB9IGZyb20gJ21vZGVscy9rZXlzJztcblxuY29uc3QgY3JlYXRlT3JnYW5pemF0aW9uQ29udHJvbGxlcjogUmVxdWVzdEhhbmRsZXIgPSBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBvcmdhbml6YXRpb24gPSBhd2FpdCBPcmdhbml6YXRpb25zLmNyZWF0ZSh7XG4gICAgICBbT3JnYW5pemF0aW9uS2V5cy5OQU1FXTogcmVxLmJvZHkubmFtZSxcbiAgICAgIFtPcmdhbml6YXRpb25LZXlzLkNJVFldOiByZXEuYm9keS5jaXR5LFxuICAgICAgW09yZ2FuaXphdGlvbktleXMuU1RBVEVdOiByZXEuYm9keS5zdGF0ZSxcbiAgICAgIFtPcmdhbml6YXRpb25LZXlzLlpJUF06IHJlcS5ib2R5LnppcCxcbiAgICAgIFtPcmdhbml6YXRpb25LZXlzLk1JU1NJT05dOiByZXEuYm9keS5taXNzaW9uLFxuICAgIH0pO1xuXG4gICAgY29uc3QgY29udGFjdCA9IGF3YWl0IENvbnRhY3RzLmZpbmRPbmUoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgW0NvbnRhY3RLZXlzLlVVSURdOiByZXEudXNlclxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgb3JnYW5pemF0aW9uLmFkZENvbnRhY3QoY29udGFjdCwgeyB0aHJvdWdoOiBPcmdhbml6YXRpb25zQ29udGFjdHMgfSk7XG5cbiAgICByZXMuanNvbih7XG4gICAgICBvcmdhbml6YXRpb25cbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgbmV4dChlcnIpO1xuICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVPcmdhbml6YXRpb25Db250cm9sbGVyO1xuIl19