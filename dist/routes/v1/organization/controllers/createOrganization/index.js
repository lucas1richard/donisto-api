"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _models = require("../../../../../models");

var _keys = require("../../../../../models/keys");

const createOrganizationController = async (req, res, next) => {
  try {
    const organization = await _models.Organizations.create({
      [_keys.OrganizationKeys.NAME]: req.body.name,
      [_keys.OrganizationKeys.CITY]: req.body.city,
      [_keys.OrganizationKeys.STATE]: req.body.state,
      [_keys.OrganizationKeys.ZIP]: req.body.zip,
      [_keys.OrganizationKeys.MISSION]: req.body.mission
    });
    const contact = await _models.Contacts.findOne({
      where: {
        [_keys.ContactKeys.UUID]: req.user.uuid
      }
    });
    organization.addContact(contact, {
      through: {
        model: _models.OrganizationsContacts
      }
    });
    res.json({
      organization
    });
  } catch (err) {
    next(err);
  }
};

var _default = createOrganizationController;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3NyYy9yb3V0ZXMvdjEvb3JnYW5pemF0aW9uL2NvbnRyb2xsZXJzL2NyZWF0ZU9yZ2FuaXphdGlvbi9pbmRleC50cyJdLCJuYW1lcyI6WyJjcmVhdGVPcmdhbml6YXRpb25Db250cm9sbGVyIiwicmVxIiwicmVzIiwibmV4dCIsIm9yZ2FuaXphdGlvbiIsIk9yZ2FuaXphdGlvbnMiLCJjcmVhdGUiLCJPcmdhbml6YXRpb25LZXlzIiwiTkFNRSIsImJvZHkiLCJuYW1lIiwiQ0lUWSIsImNpdHkiLCJTVEFURSIsInN0YXRlIiwiWklQIiwiemlwIiwiTUlTU0lPTiIsIm1pc3Npb24iLCJjb250YWN0IiwiQ29udGFjdHMiLCJmaW5kT25lIiwid2hlcmUiLCJDb250YWN0S2V5cyIsIlVVSUQiLCJ1c2VyIiwidXVpZCIsImFkZENvbnRhY3QiLCJ0aHJvdWdoIiwibW9kZWwiLCJPcmdhbml6YXRpb25zQ29udGFjdHMiLCJqc29uIiwiZXJyIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQ0E7O0FBQ0E7O0FBRUEsTUFBTUEsNEJBQTRDLEdBQUcsT0FBT0MsR0FBUCxFQUFZQyxHQUFaLEVBQWlCQyxJQUFqQixLQUEwQjtBQUM3RSxNQUFJO0FBQ0YsVUFBTUMsWUFBWSxHQUFHLE1BQU1DLHNCQUFjQyxNQUFkLENBQXFCO0FBQzlDLE9BQUNDLHVCQUFpQkMsSUFBbEIsR0FBeUJQLEdBQUcsQ0FBQ1EsSUFBSixDQUFTQyxJQURZO0FBRTlDLE9BQUNILHVCQUFpQkksSUFBbEIsR0FBeUJWLEdBQUcsQ0FBQ1EsSUFBSixDQUFTRyxJQUZZO0FBRzlDLE9BQUNMLHVCQUFpQk0sS0FBbEIsR0FBMEJaLEdBQUcsQ0FBQ1EsSUFBSixDQUFTSyxLQUhXO0FBSTlDLE9BQUNQLHVCQUFpQlEsR0FBbEIsR0FBd0JkLEdBQUcsQ0FBQ1EsSUFBSixDQUFTTyxHQUphO0FBSzlDLE9BQUNULHVCQUFpQlUsT0FBbEIsR0FBNEJoQixHQUFHLENBQUNRLElBQUosQ0FBU1M7QUFMUyxLQUFyQixDQUEzQjtBQVFBLFVBQU1DLE9BQU8sR0FBRyxNQUFNQyxpQkFBU0MsT0FBVCxDQUFpQjtBQUNyQ0MsTUFBQUEsS0FBSyxFQUFFO0FBQ0wsU0FBQ0Msa0JBQVlDLElBQWIsR0FBb0J2QixHQUFHLENBQUN3QixJQUFKLENBQVNDO0FBRHhCO0FBRDhCLEtBQWpCLENBQXRCO0FBTUF0QixJQUFBQSxZQUFZLENBQUN1QixVQUFiLENBQXdCUixPQUF4QixFQUFpQztBQUMvQlMsTUFBQUEsT0FBTyxFQUFFO0FBQ1BDLFFBQUFBLEtBQUssRUFBRUM7QUFEQTtBQURzQixLQUFqQztBQU1BNUIsSUFBQUEsR0FBRyxDQUFDNkIsSUFBSixDQUFTO0FBQ1AzQixNQUFBQTtBQURPLEtBQVQ7QUFHRCxHQXhCRCxDQXdCRSxPQUFPNEIsR0FBUCxFQUFZO0FBQ1o3QixJQUFBQSxJQUFJLENBQUM2QixHQUFELENBQUo7QUFDRDtBQUNGLENBNUJEOztlQThCZWhDLDRCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUmVxdWVzdEhhbmRsZXIgfSBmcm9tICdleHByZXNzJztcbmltcG9ydCB7IE9yZ2FuaXphdGlvbnMsIENvbnRhY3RzLCBPcmdhbml6YXRpb25zQ29udGFjdHMgfSBmcm9tICdtb2RlbHMnO1xuaW1wb3J0IHsgT3JnYW5pemF0aW9uS2V5cywgQ29udGFjdEtleXMgfSBmcm9tICdtb2RlbHMva2V5cyc7XG5cbmNvbnN0IGNyZWF0ZU9yZ2FuaXphdGlvbkNvbnRyb2xsZXI6IFJlcXVlc3RIYW5kbGVyID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3Qgb3JnYW5pemF0aW9uID0gYXdhaXQgT3JnYW5pemF0aW9ucy5jcmVhdGUoe1xuICAgICAgW09yZ2FuaXphdGlvbktleXMuTkFNRV06IHJlcS5ib2R5Lm5hbWUsXG4gICAgICBbT3JnYW5pemF0aW9uS2V5cy5DSVRZXTogcmVxLmJvZHkuY2l0eSxcbiAgICAgIFtPcmdhbml6YXRpb25LZXlzLlNUQVRFXTogcmVxLmJvZHkuc3RhdGUsXG4gICAgICBbT3JnYW5pemF0aW9uS2V5cy5aSVBdOiByZXEuYm9keS56aXAsXG4gICAgICBbT3JnYW5pemF0aW9uS2V5cy5NSVNTSU9OXTogcmVxLmJvZHkubWlzc2lvbixcbiAgICB9KTtcblxuICAgIGNvbnN0IGNvbnRhY3QgPSBhd2FpdCBDb250YWN0cy5maW5kT25lKHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIFtDb250YWN0S2V5cy5VVUlEXTogcmVxLnVzZXIudXVpZCxcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIG9yZ2FuaXphdGlvbi5hZGRDb250YWN0KGNvbnRhY3QsIHtcbiAgICAgIHRocm91Z2g6IHtcbiAgICAgICAgbW9kZWw6IE9yZ2FuaXphdGlvbnNDb250YWN0c1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmVzLmpzb24oe1xuICAgICAgb3JnYW5pemF0aW9uXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIG5leHQoZXJyKTtcbiAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlT3JnYW5pemF0aW9uQ29udHJvbGxlcjtcbiJdfQ==