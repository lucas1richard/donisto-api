"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _models = require("../../../../../models");

var _keys = require("../../../../../models/keys");

const createOrganizationController = async (req, res, next) => {
  try {
    const organization = await _models.Organizations.create({
      [_keys.OrganizationKeys.NAME]: req.body.name,
      [_keys.OrganizationKeys.CITY]: req.body.city,
      [_keys.OrganizationKeys.STATE]: req.body.state,
      [_keys.OrganizationKeys.ZIP]: req.body.zip,
      [_keys.OrganizationKeys.MISSION]: req.body.mission
    });
    const contact = await _models.Contacts.findOne({
      where: {
        [_keys.ContactKeys.UUID]: res.locals.uuid
      }
    });
    organization.addContact(contact, {
      through: _models.OrganizationsContacts
    });
    res.json({
      organization
    });
  } catch (err) {
    next(err);
  }
};

var _default = createOrganizationController;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3NyYy9yb3V0ZXMvdjEvb3JnYW5pemF0aW9uL2NvbnRyb2xsZXJzL2NyZWF0ZU9yZ2FuaXphdGlvbi9pbmRleC50cyJdLCJuYW1lcyI6WyJjcmVhdGVPcmdhbml6YXRpb25Db250cm9sbGVyIiwicmVxIiwicmVzIiwibmV4dCIsIm9yZ2FuaXphdGlvbiIsIk9yZ2FuaXphdGlvbnMiLCJjcmVhdGUiLCJPcmdhbml6YXRpb25LZXlzIiwiTkFNRSIsImJvZHkiLCJuYW1lIiwiQ0lUWSIsImNpdHkiLCJTVEFURSIsInN0YXRlIiwiWklQIiwiemlwIiwiTUlTU0lPTiIsIm1pc3Npb24iLCJjb250YWN0IiwiQ29udGFjdHMiLCJmaW5kT25lIiwid2hlcmUiLCJDb250YWN0S2V5cyIsIlVVSUQiLCJsb2NhbHMiLCJ1dWlkIiwiYWRkQ29udGFjdCIsInRocm91Z2giLCJPcmdhbml6YXRpb25zQ29udGFjdHMiLCJqc29uIiwiZXJyIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQ0E7O0FBQ0E7O0FBRUEsTUFBTUEsNEJBQTRDLEdBQUcsT0FBT0MsR0FBUCxFQUFZQyxHQUFaLEVBQWlCQyxJQUFqQixLQUEwQjtBQUM3RSxNQUFJO0FBQ0YsVUFBTUMsWUFBWSxHQUFHLE1BQU1DLHNCQUFjQyxNQUFkLENBQXFCO0FBQzlDLE9BQUNDLHVCQUFpQkMsSUFBbEIsR0FBeUJQLEdBQUcsQ0FBQ1EsSUFBSixDQUFTQyxJQURZO0FBRTlDLE9BQUNILHVCQUFpQkksSUFBbEIsR0FBeUJWLEdBQUcsQ0FBQ1EsSUFBSixDQUFTRyxJQUZZO0FBRzlDLE9BQUNMLHVCQUFpQk0sS0FBbEIsR0FBMEJaLEdBQUcsQ0FBQ1EsSUFBSixDQUFTSyxLQUhXO0FBSTlDLE9BQUNQLHVCQUFpQlEsR0FBbEIsR0FBd0JkLEdBQUcsQ0FBQ1EsSUFBSixDQUFTTyxHQUphO0FBSzlDLE9BQUNULHVCQUFpQlUsT0FBbEIsR0FBNEJoQixHQUFHLENBQUNRLElBQUosQ0FBU1M7QUFMUyxLQUFyQixDQUEzQjtBQVFBLFVBQU1DLE9BQU8sR0FBRyxNQUFNQyxpQkFBU0MsT0FBVCxDQUFpQjtBQUNyQ0MsTUFBQUEsS0FBSyxFQUFFO0FBQ0wsU0FBQ0Msa0JBQVlDLElBQWIsR0FBb0J0QixHQUFHLENBQUN1QixNQUFKLENBQVdDO0FBRDFCO0FBRDhCLEtBQWpCLENBQXRCO0FBTUF0QixJQUFBQSxZQUFZLENBQUN1QixVQUFiLENBQXdCUixPQUF4QixFQUFpQztBQUFFUyxNQUFBQSxPQUFPLEVBQUVDO0FBQVgsS0FBakM7QUFFQTNCLElBQUFBLEdBQUcsQ0FBQzRCLElBQUosQ0FBUztBQUNQMUIsTUFBQUE7QUFETyxLQUFUO0FBR0QsR0FwQkQsQ0FvQkUsT0FBTzJCLEdBQVAsRUFBWTtBQUNaNUIsSUFBQUEsSUFBSSxDQUFDNEIsR0FBRCxDQUFKO0FBQ0Q7QUFDRixDQXhCRDs7ZUEwQmUvQiw0QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJlcXVlc3RIYW5kbGVyIH0gZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgeyBPcmdhbml6YXRpb25zLCBDb250YWN0cywgT3JnYW5pemF0aW9uc0NvbnRhY3RzIH0gZnJvbSAnbW9kZWxzJztcbmltcG9ydCB7IE9yZ2FuaXphdGlvbktleXMsIENvbnRhY3RLZXlzIH0gZnJvbSAnbW9kZWxzL2tleXMnO1xuXG5jb25zdCBjcmVhdGVPcmdhbml6YXRpb25Db250cm9sbGVyOiBSZXF1ZXN0SGFuZGxlciA9IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IG9yZ2FuaXphdGlvbiA9IGF3YWl0IE9yZ2FuaXphdGlvbnMuY3JlYXRlKHtcbiAgICAgIFtPcmdhbml6YXRpb25LZXlzLk5BTUVdOiByZXEuYm9keS5uYW1lLFxuICAgICAgW09yZ2FuaXphdGlvbktleXMuQ0lUWV06IHJlcS5ib2R5LmNpdHksXG4gICAgICBbT3JnYW5pemF0aW9uS2V5cy5TVEFURV06IHJlcS5ib2R5LnN0YXRlLFxuICAgICAgW09yZ2FuaXphdGlvbktleXMuWklQXTogcmVxLmJvZHkuemlwLFxuICAgICAgW09yZ2FuaXphdGlvbktleXMuTUlTU0lPTl06IHJlcS5ib2R5Lm1pc3Npb24sXG4gICAgfSk7XG5cbiAgICBjb25zdCBjb250YWN0ID0gYXdhaXQgQ29udGFjdHMuZmluZE9uZSh7XG4gICAgICB3aGVyZToge1xuICAgICAgICBbQ29udGFjdEtleXMuVVVJRF06IHJlcy5sb2NhbHMudXVpZFxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgb3JnYW5pemF0aW9uLmFkZENvbnRhY3QoY29udGFjdCwgeyB0aHJvdWdoOiBPcmdhbml6YXRpb25zQ29udGFjdHMgfSk7XG5cbiAgICByZXMuanNvbih7XG4gICAgICBvcmdhbml6YXRpb25cbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgbmV4dChlcnIpO1xuICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVPcmdhbml6YXRpb25Db250cm9sbGVyO1xuIl19